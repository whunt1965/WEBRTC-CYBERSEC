#!/usr/bin/python
import sys
print('Number of arguments:', len(sys.argv), 'arguments.')
print('Argument List:', str(sys.argv[1]))
#keyword to search for in the log file
match_list = ["handle_udp_packet:"]
ips = set()
with open(sys.argv[1], "r") as file:
    for line in file:
        #split each line into array 
        arr = line.split()
        for matches in match_list:
                #arr[0] is the id, arr[1] is the log type
                if (arr[1] == matches):
                    ips.add(arr[10])

with open("./ips.txt", "w") as outfile:
    for ip in ips:
        print(ip, file=outfile)
